<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Louvores</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        :root {
            --primary-color: #6a1b9a;
            --secondary-color: #f3e5f5;
            --text-color: #333;
            --background-color: #f0f2f5;
            --card-background: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background: var(--card-background);
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            position: relative;
        }
        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        .list-selection {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }
        .list-selection button {
            padding: 10px 25px;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            background-color: transparent;
            color: var(--primary-color);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .list-selection button.active {
            background-color: var(--primary-color);
            color: white;
            box-shadow: var(--shadow);
        }
        .list-selection button:hover:not(.active) {
            background-color: var(--secondary-color);
        }
        .header-actions {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 15px;
        }
        #editModeBtn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            background-color: var(--primary-color);
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #editModeBtn:hover {
            background-color: #4a148c;
        }
        ul {
            list-style: none;
            padding: 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        li {
            display: flex;
            flex-direction: column;
            padding: 12px 15px;
            background-color: var(--card-background);
            border-bottom: 1px solid #eee;
            transition: background-color 0.2s ease;
        }
        li:hover {
            background-color: #f9f9f9;
        }
        li:last-child {
            border-bottom: none;
        }
        .list-item-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }
        .list-item-content {
            flex-grow: 1;
            display: flex;
            align-items: center;
        }
        .list-item-content input[type="checkbox"] {
            margin-right: 20px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .list-item-content input[type="text"] {
            border: none;
            background: transparent;
            font-size: 16px;
            color: var(--text-color);
            width: 100%;
            padding: 5px;
        }
        .list-item-content input[type="text"]:disabled {
            color: #555;
        }
        .item-actions {
            display: none; /* Oculta por padrão */
            gap: 10px;
            margin-left: 15px;
        }
        .editing .item-actions {
            display: flex; /* Exibe no modo de edição */
        }
        .remove-btn {
            background: none;
            border: none;
            cursor: pointer;
            color: #dc3545;
            font-size: 1.5em;
            padding: 0;
            line-height: 1;
            transition: transform 0.2s ease;
        }
        .remove-btn:hover {
            transform: scale(1.1);
        }
        .add-section, .save-btn {
            display: none;
        }
        .logged-in .add-section, .logged-in .save-btn {
            display: flex;
        }
        .add-section {
            gap: 10px;
            margin-top: 20px;
        }
        #newItemText {
            flex-grow: 1;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px;
        }
        #addBtn {
            padding: 12px 20px;
            border: none;
            background-color: #28a745;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }
        #addBtn:hover {
            background-color: #218838;
        }
        .save-btn {
            width: 100%;
            padding: 15px;
            margin-top: 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .save-btn:hover {
            background-color: #4a148c;
        }
        .observation {
            font-size: 14px;
            margin-top: 10px;
            padding: 8px 12px;
            width: 100%;
            box-sizing: border-box;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #f9f9f9;
        }
        .observation:disabled {
            background-color: #f0f0f0;
            color: #777;
            cursor: default;
        }
        /* Login Modal */
        .login-modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            padding-top: 60px;
        }
        .login-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            text-align: center;
        }
        .close-btn {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-btn:hover, .close-btn:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        .login-content h2 {
            margin-top: 0;
            color: var(--primary-color);
        }
        .login-content input {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .login-content button {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            margin-top: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .login-content button:hover {
            background-color: #4a148c;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Lista de Louvores</h1>

    <div class="list-selection">
        <button id="coletaneaBtn">Coletânea</button>
        <button id="avulsosBtn">Avulsos</button>
        <button id="ciasBtn">Cias</button>
    </div>

    <div class="header-actions">
        <button id="editModeBtn">Editar</button>
    </div>

    <ul id="musicList"></ul>

    <div class="add-section">
        <input type="text" id="newItemText" placeholder="Adicionar novo louvor...">
        <button id="addBtn">Adicionar</button>
    </div>

    <button class="save-btn" onclick="saveList()">Salvar</button>
</div>

<div id="loginModal" class="login-modal">
    <div class="login-content">
        <span class="close-btn">&times;</span>
        <h2>Autenticação</h2>
        <input type="text" id="usernameInput" placeholder="Usuário">
        <input type="password" id="passwordInput" placeholder="Senha">
        <button onclick="login()">Entrar</button>
        <p id="loginError" style="color: #dc3545; display: none; margin-top: 10px;">Usuário ou senha inválidos.</p>
    </div>
</div>

<script>
    const musicasColetanea = [
        { text: "003 - CLAMO A TI", checked: false, observation: "" },
        { text: "004 - QUANDO TE PROSTRARES", checked: false, observation: "" },
        { text: "005 - CLAMANDO ESTOU", checked: false, observation: "" },
        { text: "021 - NESTA HORA DE CLAMOR", checked: false, observation: "" },
        { text: "034 - QUANDO BUSCAMOS", checked: false, observation: "" },
        { text: "055 - SENHOR, MEU DEUS E PAI", checked: false, observation: "" },
        { text: "057 - EM FERVENTE ORAÇÃO", checked: false, observation: "" },
        { text: "073 - DEUS ESTÁ NO TEMPLO", checked: false, observation: "" },
        { text: "077 - VEM, VISITA TUA IGREJA", checked: false, observation: "" },
        { text: "079 - DEUS ESTÁ PRESENTE ENTRE PECADORES COMO NÓS", checked: false, observation: "" },
        { text: "087 - MEU PECADO RESGATADO", checked: false, observation: "" },
        { text: "096 - COM A MINHA VOZ CLAMO AO SENHOR (SALMO 142)", checked: false, observation: "" },
        { text: "105 - PERDIDO FOI QUE ELE ME ENCONTROU", checked: false, observation: "" },
        { text: "110 - OH! QUÃO CEGO ANDEI E PERDIDO VAGUEI", checked: false, observation: "" },
        { text: "121 - TUDO, Ó CRISTO, A TI ENTREGO", checked: false, observation: "" },
        { text: "139 - NÃO SEI POR QUE DE DEUS O AMOR", checked: false, observation: "" },
        { text: "168 - TU ÉS FIEL, SENHOR", checked: false, observation: "" },
        { text: "178 - O DEUS A QUEM SERVIMOS", checked: false, observation: "" },
        { text: "180 - ENCONTREI O GRANDE AMOR", checked: false, observation: "" },
        { text: "181 - EM TI EU ENCONTRO, Ó DEUS, TODA PAZ", checked: false, observation: "" },
        { text: "185 - JESUS, SENHOR, ME CHEGO A TI (EU VENHO COMO ESTOU)", checked: false, observation: "" },
        { text: "196 - O GRANDE AMOR DO MEU SENHOR", checked: false, observation: "" },
        { text: "197 - HOJE QUERO SOMENTE AGRADECER", checked: false, observation: "" },
        { text: "207 - DEUS ENVIOU SEU FILHO AMADO", checked: false, observation: "" },
        { text: "212 - RUDE CRUZ", checked: false, observation: "" },
        { text: "223 - ONDE ESTÁ O CORDEIRO?", checked: false, observation: "" },
        { text: "309 - OH! POR QUE DUVIDAR?", checked: false, observation: "" },
        { text: "310 - MESTRE, O MAR SE REVOLTA", checked: false, observation: "" },
        { text: "345 - EM NADA PONHO A MINHA FÉ", checked: false, observation: "" },
        { text: "347 - FIRME NAS PROMESSAS", checked: false, observation: "" },
        { text: "365 - NÃO TEMAS, POIS TE ESCOLHI (QUANDO PELAS ÁGUAS)", checked: false, observation: "" },
        { text: "378 - CONFIA E ORA", checked: false, observation: "" },
        { text: "379 - ALGEMADO POR UM PESO", checked: false, observation: "" },
        { text: "380 - POSSO SENTIR O SEU TOQUE EM MIM (GLORIFICA)", checked: false, observation: "" },
        { text: "381 - MEU DEUS VENCE BATALHAS", checked: false, observation: "" },
        { text: "382 - JÁ CHEGUEI ATÉ AQUI (VITÓRIAS)", checked: false, observation: "" },
        { text: "383 - LÁ ONDE EU NÃO POSSO VER (A ORAÇÃO)", checked: false, observation: "" },
        { text: "387 - SONDA-ME, Ó DEUS", checked: false, observation: "" },
        { text: "396 - ABBA PAI", checked: false, observation: "" },
        { text: "400 - EU QUERO SER, SENHOR AMADO", checked: false, observation: "" },
        { text: "401 - COMO TU QUERES", checked: false, observation: "" },
        { text: "423 - Ó PASTOR DE ISRAEL", checked: false, observation: "" },
        { text: "431 - CRISTO JÁ NOS PREPAROU", checked: false, observation: "" },
        { text: "436 - ESPÍRITO DO TRINO DEUS", checked: false, observation: "" },
        { text: "444 - DESEJEI ARDENTEMENTE", checked: false, observation: "" },
        { text: "447 - SENHOR, GUIA-NOS", checked: false, observation: "" },
        { text: "454 - SENHOR, MEU DEUS, O QUE DIREI DE TI? (SAUDE ESPIRITUAL)", checked: false, observation: "" },
        { text: "455 - QUANTO MAIS EU TE CONHEÇO (CAMINHO FELIZ)", checked: false, observation: "" },
        { text: "461 - TU, Ó SENHOR, TU ÉS TÃO PURO DE OLHOS (AVIVA A TUA OBRA)", checked: false, observation: "" },
        { text: "463 - VEM, SENHOR, VIŞITA TUA VINHA", checked: false, observation: "" },
        { text: "467 - OS GUERREIROS SE PREPARAM", checked: false, observation: "" },
        { text: "470 - NO GETSÊMANI", checked: false, observation: "" },
        { text: "473 - MINHA PORÇÃO", checked: false, observation: "" },
        { text: "474 - QUEM SOU EU, SENHOR", checked: false, observation: "" },
        { text: "475 - AINDA UMA VEZ (AGEU)?", checked: false, observation: "" },
        { text: "477 - SEMPRE VOU LEMBRAR", checked: false, observation: "" },
        { text: "483 - CHEGOU O TEMPO DE PENSAR", checked: false, observation: "" },
        { text: "492 - ELE VOLTARÁ, SIM, ELE VOLTARÁ", checked: false, observation: "" },
        { text: "507 - O SOL ESCURECERÁ", checked: false, observation: "" },
        { text: "527 - REGOZIJAI-VOS *", checked: false, observation: "" },
        { text: "547 - Ó VEM LOGO, JESUS", checked: false, observation: "" },
        { text: "552 - PÁTRIA MINHA", checked: false, observation: "" },
        { text: "553 - VEM! MARANATA, JESUS VEM!", checked: false, observation: "" },
        { text: "557 - ESTE MUNDO JAMAIS PODE ME SEPARAR", checked: false, observation: "" },
        { text: "558 - VEM, JESUS CRISTO JÁ VEM", checked: false, observation: "" },
        { text: "561 - OUVI COMO QUE A VOZ DE UMA GRANDE MULTIDÃO", checked: false, observation: "" },
        { text: "568 - SENHOR, QUEM SÃO AQUELES", checked: false, observation: "" },
        { text: "571 - O GRANDE DIA ESTÁ CHEGANDO", checked: false, observation: "" },
        { text: "582 - CANTAREI AO AMOR DOS AMORES", checked: false, observation: "" },
        { text: "592 - ALELUIA! MUITAS VOZES DE ANJOS", checked: false, observation: "" },
        { text: "628 - SANTO É SEU NOME", checked: false, observation: "" },
        { text: "649 - TE LOUVAMOS, SENHOR", checked: false, observation: "" },
        { text: "651 - AMO AO SENHOR", checked: false, observation: "" },
        { text: "666 - TAL QUAL ESTOU", checked: false, observation: "" },
        { text: "667 - JUSTO ÉS, SENHOR", checked: false, observation: "" },
        { text: "670 - SE PAZ, A MAIS DOCE", checked: false, observation: "" },
        { text: "675 - NA ETERNIDADE", checked: false, observation: "" },
        { text: "685 - PERFEITO AMOR EU CONHECI", checked: false, observation: "" },
        { text: "687 - QUEM É COMO TU?", checked: false, observation: "" },
        { text: "700 - ESTEVÃO AVISTOU (EU TAMBÉM QUERO VER)", checked: false, observation: "" },
        { text: "704 - SENHOR, SE ESTIVESSES AQUI (LÁZARO)", checked: false, observation: "" },
        { text: "705 - GRANDES SÃO, SENHOR, OS TEUS FEITOS! (GRATIDÃO)", checked: false, observation: "" },
        { text: "706 - DESTE MUNDO ESCRAVO FUI (GRANDES COISAS FEZ O SENHOR POR NÓS)", checked: false, observation: "" },
        { text: "707 - EU CONFIO EM TI, SENHOR", checked: false, observation: "" },
        { text: "708 - OUVI NO CÉU (BODAS DO CORDEIRO)", checked: false, observation: "" },
        { text: "709 - RESPLANDECE, Ó JERUSALÉM", checked: false, observation: "" },
        { text: "710 - O MEU VIVER É CRISTO", checked: false, observation: "" },
        { text: "728 - NOSSA GRATIDÃO", checked: false, observation: "" },
        { text: "730 - SÓ TU NOS FAZES VENCEDORES", checked: false, observation: "" }
    ];
    const musicasAvulsas = []; // Lista inicial para avulsos
    const musicasCias = []; // Lista inicial para cias

    const users = {
        "Admin": "59135",
        "Ezequiel": "5512",
        "Alex": "Alex1515",
        "convidado": "convidadoicmh"
    };

    const musicList = document.getElementById('musicList');
    const newItemText = document.getElementById('newItemText');
    const addBtn = document.getElementById('addBtn');
    const editModeBtn = document.getElementById('editModeBtn');
    const coletaneaBtn = document.getElementById('coletaneaBtn');
    const avulsosBtn = document.getElementById('avulsosBtn');
    const ciasBtn = document.getElementById('ciasBtn');

    const loginModal = document.getElementById('loginModal');
    const usernameInput = document.getElementById('usernameInput');
    const passwordInput = document.getElementById('passwordInput');
    const loginError = document.getElementById('loginError');

    let isEditMode = false;
    let currentListKey = '';
    let currentListData = [];

    // Função para ordenar a lista por texto
    function sortList() {
        currentListData.sort((a, b) => {
            const textA = a.text.toUpperCase();
            const textB = b.text.toUpperCase();
            if (textA < textB) return -1;
            if (textA > textB) return 1;
            return 0;
        });
    }

    // Função para carregar uma lista específica
    function loadList(listKey, defaultData) {
        currentListKey = listKey;
        const savedData = localStorage.getItem(listKey);
        if (savedData) {
            currentListData = JSON.parse(savedData);
        } else {
            currentListData = JSON.parse(JSON.stringify(defaultData));
        }
        sortList();
        renderList();
    }

    // Função para renderizar a lista
    function renderList() {
        musicList.innerHTML = '';
        currentListData.forEach((item, index) => {
            const li = document.createElement('li');
            li.className = isEditMode ? 'editing' : '';
            li.innerHTML = `
                <div class="list-item-main">
                    <div class="list-item-content">
                        <input type="checkbox" ${item.checked ? 'checked' : ''} data-index="${index}" ${isEditMode ? '' : 'disabled'}>
                        <input type="text" value="${item.text}" ${isEditMode ? '' : 'disabled'}>
                    </div>
                    <div class="item-actions">
                        <button class="remove-btn" onclick="removeItem(${index})">&times;</button>
                    </div>
                </div>
                <div class="list-item-observation">
                    <input type="text" class="observation" placeholder="Adicionar observação..." value="${item.observation}" ${isEditMode ? '' : 'disabled'}>
                </div>
            `;
            musicList.appendChild(li);
        });
    }

    // Função para adicionar um novo item
    addBtn.addEventListener('click', () => {
        const text = newItemText.value.trim();
        if (text) {
            currentListData.push({ text, checked: false, observation: "" });
            newItemText.value = '';
            sortList();
            renderList();
        }
    });

    // Função para remover um item com confirmação
    function removeItem(index) {
        if (confirm("Tem certeza que deseja excluir este item?")) {
            currentListData.splice(index, 1);
            renderList();
            saveList();
        }
    }

    // Função para salvar a lista e o estado das checkboxes
    function saveList() {
        const checkboxes = musicList.querySelectorAll('input[type="checkbox"]');
        const textInputs = musicList.querySelectorAll('.list-item-content input[type="text"]');
        const observationInputs = musicList.querySelectorAll('.observation');
        
        currentListData.forEach((item, index) => {
            item.checked = checkboxes[index].checked;
            item.text = textInputs[index].value.trim();
            item.observation = observationInputs[index].value.trim();
        });
        
        localStorage.setItem(currentListKey, JSON.stringify(currentListData));
        localStorage.setItem('lastListKey', currentListKey);
        alert('Lista salva com sucesso!');
    }

    // Função para alternar o modo de edição
    editModeBtn.addEventListener('click', () => {
        loginModal.style.display = "block";
    });

    // Funções de login
    window.login = function() {
        const username = usernameInput.value;
        const password = passwordInput.value;

        if (users[username] === password) {
            isEditMode = true;
            document.body.classList.add('logged-in');
            renderList();
            loginModal.style.display = "none";
            loginError.style.display = "none";
            alert("Login realizado com sucesso! O modo de edição está ativado.");
        } else {
            loginError.style.display = "block";
        }
    }

    document.querySelector(".close-btn").onclick = function() {
        loginModal.style.display = "none";
        loginError.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == loginModal) {
            loginModal.style.display = "none";
            loginError.style.display = "none";
        }
    }

    // Event listeners para os botões de seleção de lista
    coletaneaBtn.addEventListener('click', () => {
        loadList('coletaneaListItems', musicasColetanea);
        coletaneaBtn.classList.add('active');
        avulsosBtn.classList.remove('active');
        ciasBtn.classList.remove('active');
    });

    avulsosBtn.addEventListener('click', () => {
        loadList('avulsosListItems', musicasAvulsas);
        avulsosBtn.classList.add('active');
        coletaneaBtn.classList.remove('active');
        ciasBtn.classList.remove('active');
    });

    ciasBtn.addEventListener('click', () => {
        loadList('ciasListItems', musicasCias);
        ciasBtn.classList.add('active');
        coletaneaBtn.classList.remove('active');
        avulsosBtn.classList.remove('active');
    });

    // Atribuindo as funções ao escopo global para serem acessadas pelo onclick
    window.removeItem = removeItem;
    window.saveList = saveList;
    window.renderList = renderList;

    // Carrega a última lista salva ao carregar a página
    const lastListKey = localStorage.getItem('lastListKey');
    if (lastListKey === 'avulsosListItems') {
        avulsosBtn.click();
    } else if (lastListKey === 'ciasListItems') {
        ciasBtn.click();
    } else {
        coletaneaBtn.click();
    }
</script>

</body>
</html>
